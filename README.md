# media-center-frontend

Repository for our custom media center GUI. Cool stuff here.

# Project Info

We have always loved Angular 1 â™¥ and nowadays it is getting more popular to use
Angular 2 with TypeScript and getting rid of huge, complex, error-prone builders
like Grunt/Gulp due to their plugins not getting the best out of the tools they
wrap. NPM scripts are a nice option, but they are too complex to maintain
unless moved into their own scripts. Webpack is the ultimate building tool which
allows for concat, minification, watcher along with its loaders which in the end
are similar to builder plugins empowered.

One of the coolest things in Webpack is the ability to combine some loaders that
result in a single JavaScript file importing its own CSS, images, HTML templates
and other stuff.

Why not Angular 2? The question is why Angular 2. To us, Angular 1 lacks
nothing. You can perfectly create your own reusable component system based
on directives with isolated scope and minimum control.

This is it, the best structure I have found to handle Angular 1 in TypeScript and
Webpack. Test framework integration pending though.

## Requirements

- Node version > 4.1.X
- NPM version > 3.7.X

Though some lower versions might work, we recommend using the ones mentioned above.

## Installation

To start working on this code you will first need to install the NPM packages as
usual but also TS typings, which allow for code completion and type checks.
You can work without the typings for sure, but since we are using TS, come on,
let's give it some love.

You will just need to run `npm i` and both packages and typings will be installed.

A note on dependencies and devDependecies:
Please, keep app packages in dependecies and all other just required for building,
coding, reunning tests, etc in devDependencies.
This applies to TS typings as well.

If possible, TS typings from `dt` are preferred.

## Building

Build Commands:

- `npm run build`: Usual build command, creates non minified package.
- `npm run build:min`: Builds minified package.
- `npm run watch`: Builds and starts a blocking watch for changes to live rebuild.
- `npm run serve`: Starts a blocking server in [localhost:9000](http://localhost:9000).

## Testing

Work in progress.

For running unit tests we prefer using karma as runner along with mocha,
chai and sinon.

There is a base configuration file where all the defaults for testing wil be
predefined, then there is the file for unit testing and for code coverage.

Main difference for these specific config files is keeping a different reporter
or preprocessors for those tests, instead of having it all in one, which would
be kinda hard to read afterwards.

Test Commands:

- `npm run test`: Runs all tests together, recommended to run it before pushing.
- `npm run test:unit`: Runs only unit tests.
- `npm run test:cov`: Runs only coverage test.
- `npm run test:func`: Runs only functional tests (WIP).

## Project Structure

```
media-center-frontend/                      This project.
|- app/                                     Application sources.
|--- components/                            All reusable components.
|----- component-name/                      Component folder/module.
|------- component-name.scss                Component styles (imported by the component).
|------- component-name.comp.ts             Component directive (imported by app.ts).
|------- component-name.tpl.html            Component template (imported by the component).
|--- config/                                Application config files.
|----- routes.config.ts                     Application router an states config.
|----- constants.config.ts                  Application general constants.
|--- services/                              Application services.
|----- service-name.{service,factory}.ts    Service implementation.
|--- states/                                All application states/views.
|----- state-name/                          State folder/module.
|------- state-name.scss                    State styles (imported by the state).
|------- state-name.ctrl.ts                 State controller (imported by app.ts).
|------- state-name.state.ts                State configuration (imported by routes.config.ts).
|------- state-name.tpl.html                State template (imported by the state).
|--- app.ts                                 Application entrypoint.
|- dist/                                    Build target folter, autogenerated.
|--- app.js                                 Built package.
|- test/                                    Test sources and config.
|--- config/                                Test configuration for runners.
|----- karma.conf.js                        Base karma configuration.
|----- karma.unit.conf.js                   Unit test config, using specs.
|----- karma.cov.conf.js                    Coverage test config, using lcov.
|----- mocha-globals.ts                     Unit/coverage test globals.
|----- protractor.conf.js                   Functional test configuration.
|----- protractor-globals.js                Functional test globals.
|--- specs/                                 Unit test sources.
|----- unit/                                All unit test suites.
|------- test-suite/                        Unit test suite.
|--------- test-case.spec.ts                Test source and expectations.
|----- functional/                          All functional test suites.
|------- test-suite/                        Functional test suite.
|--------- test-case.spec.ts                Test source and expectations.
|--------- test-case.html                   Test template.
|- typings/                                 TypeScript type definitions, autogenerated.
|- .gitignore                               Files ignored from version control.
|- index.html                               Webapp entrypoint.
|- package.json                             Package dependencies and scripts.
|- README.md                                This file.
|- tsconfig.json                            TypeScript configuration.
|- typings.json                             Typings dependencies.
|- webpack.config.js                        Webpack build and loaders config.
```

# Pending features

- Linters for TypeScript, HTML, Sass.
- Unit tests working.
- Functional tests.
